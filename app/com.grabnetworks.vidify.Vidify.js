(function(){function Clone(){}function clone(e){return typeof e=="object"?(Clone.prototype=e,new Clone):e}function copy(e){var t;if(typeof e!="object")return e;var n=e.valueOf();if(e!=n)return new e.constructor(n);if(e instanceof e.constructor&&e.constructor!==Object){t=clone(e.constructor.prototype);for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}else{t={};for(var r in e)t[r]=e[r]}return t}function DeepCopier(e){for(var t in e)this[t]=e[t]}function DeepCopyAlgorithm(){this.copiedObjects=[];var e=this;this.recursiveDeepCopy=function(t){return e.deepCopy(t)},this.depth=0}function deepCopy(e,t){var n=new DeepCopyAlgorithm;return t&&(n.maxDepth=t),n.deepCopy(e)}function isNode(e){return global.Node?e instanceof Node:typeof document=="object"&&e===document?!0:typeof e.nodeType=="number"&&e.attributes&&e.childNodes&&e.cloneNode}global=typeof window=="object"?window:typeof global=="object"?global:{dev:null},console=console||{},console.log=console.log||function(){};var fs,path,ast,ugg,http;typeof require=="function"&&typeof window=="undefined"&&(fs=require("fs"),path=require("path"),ast=require("uglify-js").parser,ugg=require("uglify-js").uglify,http=require("http"));var _={debugging:0,application:{},util:{lookup:function(e){var t=global,n=e.split(".");for(var r=0;r<n.length;r++){var i=n[r];t=t[i]=t[i]||{}}return t},stringify:function(e,t){if(typeof e=="undefined")return"{undefined}";if(e===null)return"{null}";if(e.tagName)return"<"+e.tagName+">";var n="",r;if(e instanceof Array){n+="[ ";for(var i=0;i<e.length;i++)r=e[i],r=_.util.stringify(r,!0),n+=r+",";return n=n.slice(0,-1),n+=" ]",n}switch(typeof e){case"object":n+="{ ";for(var s in e){r=e[s];var o=typeof r;t?r=o==="{object}"||o==="{function}"?o:r:r=_.util.stringify(r,!0),n+=" "+s+" : "+r+","}return n=n.slice(0,-1),n+=" }",n;case"function":return"{function}";default:return e}},deepCopy:deepCopy,scope:function(e,t,n){return function(){function r(e){if(e._imports)for(var t=0;t<e._imports.length;t++){var i=e._imports[t],s=i.split(".").pop();if(!n[s]){n[s]=global[s];var o=_.util.lookup(i);s!==e._className&&r(o),global[s]=o}}}var n={};r(t);var i=e.apply(t,arguments);for(var s in n)global[s]=n[s];return i}},isMethod:function(e){return typeof e=="function"&&!(e instanceof RegExp)}},loader:{packagePath:"",queue:[],currentClass:{},_package:function(e){_debug("_.loader._package",e),_.util.lookup(e)[_.loader.currentClass.name]=_.loader.currentClass.code},_import:function(e){_debug("_.loader._import",e),_.loader.queue.indexOf(e)<0&&_.loader.load(e)},_class:function(e){_debug("_.loader._class",e),_verbose("creating stub class for",e);var t={_extends:function(e){_verbose("which extends",e),this._super=e}};return _.loader.currentClass={name:e,code:t},t},load:function(classPath){_debug("loading",classPath);var code,scriptPath,binPath="bin/"+classPath;scriptPath="src/"+classPath.replace(/\./g,"/")+".js";try{this.queue.push(classPath);if(fs&&path&&ast&&ugg)try{_verbose("looking for bytecode in",binPath),code=fs.readFileSync(binPath)}catch(e){_verbose("no bytecode available.");try{_verbose("loading source code from",scriptPath),code=fs.readFileSync(scriptPath,"ascii");try{_verbose("generating bytecode for",classPath,"source bytes =",code.length),_.debugging||(code=ast.parse(code),classPath=="Code"&&(code=ugg.ast_mangle(code),_verbose("mangling",classPath)),code=ugg.ast_squeeze(code),_verbose("squeezing",classPath),code=ugg.gen_code(code),code=code.substr(0,-1)===";"?code:code+";"+"\n"),path.existsSync("bin/")||(_info("creating bin"),fs.mkdirSync("bin/")),_debug("writing bytecode to",binPath,"final bytes =",code.length),fs.writeFileSync(binPath,code)}catch(error){throw _error("error creating bytecode"),error}}catch(error){throw _error("file system error"),error}}else if(typeof XMLHttpRequest=="function"){_verbose("streaming source code from",scriptURL);var scriptURL=scriptPath,request=new XMLHttpRequest;request.open("GET",scriptURL,!1),request.send(null);if(request.status!=200)throw _error("XMLHttpRequest error"),new Error(request.status);code=request.responseText}}catch(error){throw _error("error loading",classPath,":",error.message),error}_verbose("loaded",classPath,"successfully. processing imports");try{global._package=this._package,global._import=this._import,global._class=this._class,code=code.toString(),classPath!="Code"&&code.indexOf("_package")>-1&&code.indexOf("_class")>-1&&(_verbose("evaluating source for "),eval(code))}catch(error){throw _error("error completing imports for "+classPath+". Error Text:"+error.message),error}var stub=_.util.lookup(classPath);stub._script=code,_.compiler.queue.push(classPath),this.queue.length==_.compiler.queue.length&&(_.compiler.compileClasses(),this.queue=[])}},compiler:{buffer:"",queue:[],_package:function(e){_debug("_.compiler._package",e),_verbose("nothing to do")},_import:function(e){_debug("_.compiler._import",e),_verbose("nothing to do")},_class:function(e){return _debug("_.compiler._class",e),_verbose("null extender"),{_extends:function(){}}},compileClasses:function(){_verbose("compiling classes");var e;while(e=this.queue[0])this.compile(e);_.interpreter.defineClasses(),this._queue=[]},compile:function(classPath){var index=this.queue.indexOf(classPath);if(index>=0){this.queue.splice(index,1);var stub=_.util.lookup(classPath);_verbose("adding class",classPath),global._package=this._package,global._import=this._import,global._class=this._class;var code=stub._script;classPath!="Code"&&code.indexOf("_package")>-1&&code.indexOf("_class")>-1&&(_verbose("evaluating cource for "),eval(code)),this.buffer=this.buffer.concat(code),_verbose(this.buffer.length,"bytes",this.queue.length,"scripts remain.")}}},interpreter:{initializing:!1,imports:[],packagePath:null,currentClass:{},_package:function(e){_verbose("_.interpreter._package",e),_.interpreter.currentClass.code._imports.push(e+"."+_.interpreter.currentClass.name),_.util.lookup(e)[_.interpreter.currentClass.name]=_.interpreter.currentClass.code,_.interpreter.imports=[]},_import:function(e){_verbose("_.interpreter._import",e),_.interpreter.imports.push(e)},_class:function(e,t){_debug("_.interpreter._class",e);var n=Class._plus(e,t);return n._extends=function(t,n){_debug("_extends",t);var r;for(var i=0;i<_.interpreter.imports.length;i++)_.interpreter.imports[i].indexOf(t)>-1&&(r=_.interpreter.imports[i]);if(typeof r=="undefined")throw new TypeError(e+" cannot _extend "+t+", it has not been _imported.");_verbose("_extending",r);var s=_.util.lookup(r)._plus(e,n);s._className=e,s._imports=_.interpreter.imports,_.interpreter.bakeClass(s)},n._className=e,n._imports=_.interpreter.imports,_.interpreter.bakeClass(n),n},bakeClass:function(e){_verbose("baking",e.toString());for(var t in e){var n=e[t];[e._className,"_plus","toString","_extends"].indexOf(t)===-1&&_.util.isMethod(n)&&(_verbose("scoping static",t),e[t]=_.util.scope(n,e,t))}_.interpreter.currentClass={name:e._className,code:e}},defineClasses:function(){_debug("defining classes"),global._package=this._package,global._import=this._import,global._class=this._class,eval(_.compiler.buffer),_.compiler.buffer=""}}};global.DebugLevels={SILENT:0,ERRORS:1,WARNINGS:2,INFO:3,DEBUG:4,VERBOSE:5},_trace=function(){var e="",t=arguments;for(var n in t){var r=_.util.stringify(t[n]);e+=r+" "}console.log(e)},_error=function(){_.debugging>=DebugLevels.ERRORS&&_trace.apply(this,arguments)},_warn=function(){_.debugging>=DebugLevels.WARNINGS&&_trace.apply(this,arguments)},_info=function(){_.debugging>=DebugLevels.INFO&&_trace.apply(this,arguments)},_debug=function(){_.debugging>=DebugLevels.DEBUG&&_trace.apply(this,arguments)},_verbose=function(){_.debugging>=DebugLevels.VERBOSE&&_trace.apply(this,arguments)};var Class=function(){};Class._className="Class",Class.prototype={_get:function(e){var t=this[e];return t===undefined?undefined:typeof this[e]=="function"?this[e]():this[e]},_set:function(e,t){var n=this[e];n===undefined?this[e]=t:typeof this[e]=="function"?this[e](t):this[e]=t},_add:function(e,t){e=e||1;var n=this[t];n===undefined?this[t]=e:typeof this[t]=="function"?this[t](this[t]()+e):this[t]+=e},_expose:function(e){for(var t in e)typeof e[t]=="function"&&typeof this[t]=="undefined"&&(this[t]=e[t])},toString:function(){return"["+this._className+"]"}},Class._plus=function(e,t){function v(){this._super.apply(this,arguments)}function m(e,t,n){return function(e,t,n){return function(){var i=this._super;this._super=function(){if(e==="__init__"){var t=n.__init__||function(){};return n=n._superPrototype,t.apply(this,arguments)}sup={_:{}};var r,i;for(r in n){var i=n[r];typeof i=="function"&&(sup[r]=_.util.scope(i,this,r))}var s,o;for(s in n._)o=n._[s],typeof o=="function"&&(sup._[s]=_.util.scope(o,this,s));return n=n._superPrototype,sup};var s=t.apply(this,arguments);return this._super=i,n=r,s}}(e,t,n)}function E(){this._=_.util.deepCopy(this._);if(!_.interpreter.initializing){_debug("new",this._className);for(var e in this){var t=this[e];_.util.isMethod(t)&&["toString","_get","_set","_add"].indexOf(e)<0&&(_verbose("scoping public",e),this[e]=_.util.scope(t,this,e))}for(e in this._){var t=this._[e];_.util.isMethod(t)&&(_verbose("scoping private",e),this._[e]=_.util.scope(t,this))}this.__init__&&this.__init__.apply(this,arguments)}}_.interpreter.initializing=!0;var n=new this;_.interpreter.initializing=!1,n._className=e,n._imports=_.interpreter.imports;var r=this.prototype;n._=r._?_.util.deepCopy(r._):{};var i={},s={},o=[];for(var u in t){var a=t[u],f,l,c=u,h="[function]",p={};u.indexOf("private_")>=0?(f="private",c=u.substring(u.indexOf(f)+f.length+1,u.length),p=n._):u.indexOf("static_")>=0?(f="static",p=E,c=u.substring(u.indexOf(f)+f.length+1,u.length)):u.indexOf("get_")>=0?(f="get",p=i,c=u.substring(u.indexOf(f)+f.length+1,u.length),o.indexOf(c)==-1&&o.push(c)):u.indexOf("set_")>=0?(f="set",p=s,c=u.substring(u.indexOf(f)+f.length+1,u.length),o.indexOf(c)==-1&&o.push(c)):u===e?(f="constructor",p=n,c="__init__"):(f="public",p=n);var d;typeof a=="function"?(l="function",d=m(c,a,r)):(l="var",h=a,d=_.util.deepCopy(a)),p[c]=d,_verbose("	",f,l,c,"=",h)}typeof t!="undefined"&&typeof t[e]!="function"&&(n.__init__=m("__init__",v,r));for(var g in o){var y=o[g];_verbose("property name:",y);var b=i[y]||r[y],w=s[y]||r[y];n[y]=function(e,t,n){return function(n){if(n===undefined){if(e)return e.call(this);return}t&&t.call(this,n)}}(b,w,y)}return n._superPrototype=r,E.prototype=n,E.constructor=E,E._plus=arguments.callee,E.toString=function(){return"("+this._className+")"},E};var Code=function(){return Code.c("Code")};Code.r=function(e,t){_debug("Code.r(",e,",",_.util.stringify(t),")"),global._package=_.loader._package,global._import=_.loader._import,global._class=_.loader._class,_import(e),_verbose("executing");var n=_.util.lookup(e);new n(t)},Code.x=function(e,t){var n="( function (){\n",r;try{_debug("getting Code.js from file system"),r=Code()}catch(i){throw _error("src/Code.js could not be read:\n"+i.message),i}var s;try{_verbose("compiling",e,"from source files"),s=Code.c(e)}catch(i){throw _error(e+" could not be compiled:\n"+i.message),i}_verbose("creating exec statement");var o='var scripts = document.getElementsByTagName( "script" );\nvar script = scripts[ scripts.length - 1 ];\nvar query = script.src.split("?")[1];\nif( query.length > 0 ){\n	var settings = {};\n	var list = query.split( "&");\n	for (var i = 0; i < list.length; i++ ){\n		var pair = list[i].split("=");\n		settings[pair[0]] = pair[1];\n	};\n	new '+e+"( settings );\n"+"}\n",u="})();";_debug("Code.js:",r.length,"bytes"),_debug("init statement:",n.length,"bytes"),_debug("App:",s.length,"bytes"),_debug("exec statement:",o.length,"bytes"),_debug("end statement:",u.length,"bytes");if(n&&s&&r&&o&&u)return _debug("returning executable script"),r+n+s+o+u;throw _error("incomplete app, not sending."),"Error  "+e+" not found."},Code.c=function(e){_debug("Code.c(",e,")");var t="lib/"+e+".js",n;return fs&&path&&path.existsSync(t)?n=fs.readFileSync(t,"ascii"):_warn("no library at",t),n||(_.interpreter={defineClasses:function(){_verbose("bypassing interpreter.")}},global._import=_.loader._import,_import(e),n=_.compiler.buffer,fs&&path&&(path.existsSync("lib/")||(_debug("creating lib folder"),fs.mkdirSync("lib/")),_debug("saving lib file to",t),fs.writeFileSync(t,n)),_.compiler.buffer=""),n},Code._=_,global.Code=Code,global._package=_.interpreter._package,global._import=_.interpreter._import,global._class=_.interpreter._class,_debug("Code.js is ready. @2013 Neuromantic, LLC. All Rights reserved. Licenced under the MIT license.");var deepCopiers=[];return DeepCopier.prototype={constructor:DeepCopier,canCopy:function(e){return!1},create:function(e){},populate:function(e,t,n){}},DeepCopyAlgorithm.prototype={constructor:DeepCopyAlgorithm,maxDepth:256,cacheResult:function(e,t){this.copiedObjects.push([e,t])},getCachedResult:function(e){var t=this.copiedObjects,n=t.length;for(var r=0;r<n;r++)if(t[r][0]===e)return t[r][1];return undefined},deepCopy:function(e){if(e===null)return null;if(typeof e!="object")return e;var t=this.getCachedResult(e);if(t)return t;for(var n=0;n<deepCopiers.length;n++){var r=deepCopiers[n];if(r.canCopy(e))return this.applyDeepCopier(r,e)}throw new Error("no DeepCopier is able to copy "+e)},applyDeepCopier:function(e,t){var n=e.create(t);this.cacheResult(t,n),this.depth++;if(this.depth>this.maxDepth)throw new Error("Exceeded max recursion depth in deep copy.");return e.populate(this.recursiveDeepCopy,t,n),this.depth--,n}},deepCopy.DeepCopier=DeepCopier,deepCopy.deepCopiers=deepCopiers,deepCopy.register=function(e){e instanceof DeepCopier||(e=new DeepCopier(e)),deepCopiers.unshift(e)},deepCopy.register({canCopy:function(e){return!0},create:function(e){return e instanceof e.constructor?clone(e.constructor.prototype):{}},populate:function(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}}),deepCopy.register({canCopy:function(e){return e instanceof Array},create:function(e){return new e.constructor},populate:function(e,t,n){for(var r=0;r<t.length;r++)n.push(e(t[r]));return n}}),deepCopy.register({canCopy:function(e){return e instanceof Date},create:function(e){return new Date(e)}}),deepCopy.register({canCopy:function(e){return isNode(e)},create:function(e){return typeof document=="object"&&e===document?document:e.cloneNode(!1)},populate:function(e,t,n){if(typeof document=="object"&&t===document)return document;if(t.childNodes&&t.childNodes.length)for(var r=0;r<t.childNodes.length;r++){var i=e(t.childNodes[r]);n.appendChild(i)}}}),deepCopy.register({canCopy:function(e){return e._className=="Dictionary"},create:function(){return new Dictionary},populate:function(e,t,n){for(var r in t._keys)n._keys[r]=t._keys[r],n._values[r]=e(t.values[r])}}),Code})();
( function (){
var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",ON_READY_STATE_CHANGE="onreadystatechange",win=window,doc=document,nav=navigator,plugin=!1,domLoadFnArr=[main],regObjArr=[],objIdArr=[],listenersArr=[],storedAltContent,storedAltContentId,storedCallbackFn,storedCallbackObj,isDomLoaded=!1,isExpressInstallActive=!1,dynamicStylesheet,dynamicStylesheetMedia,autoHideShow=!0,ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,ie=!1,playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT)d=nav.plugins[SHOCKWAVE_FLASH].description,d&&(typeof nav.mimeTypes==UNDEF||!nav.mimeTypes[FLASH_MIME_TYPE]||!!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)&&(plugin=!0,ie=!1,d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10),playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10),playerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof win.ActiveXObject!=UNDEF)try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);a&&(d=a.GetVariable("$version"),d&&(ie=!0,d=d.split(" ")[1].split(","),playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]))}catch(e){}return{w3:w3cdom,pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac}}(),onDomLoad=function(){if(!ua.w3)return;(typeof doc.readyState!=UNDEF&&doc.readyState=="complete"||typeof doc.readyState==UNDEF&&(doc.getElementsByTagName("body")[0]||doc.body))&&callDomLoadFunctions(),isDomLoaded||(typeof doc.addEventListener!=UNDEF&&doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,!1),ua.ie&&ua.win&&(doc.attachEvent(ON_READY_STATE_CHANGE,function(){doc.readyState=="complete"&&(doc.detachEvent(ON_READY_STATE_CHANGE,arguments.callee),callDomLoadFunctions())}),win==top&&function(){if(isDomLoaded)return;try{doc.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}callDomLoadFunctions()}()),ua.wk&&function(){if(isDomLoaded)return;if(!/loaded|complete/.test(doc.readyState)){setTimeout(arguments.callee,0);return}callDomLoadFunctions()}(),addLoadEvent(callDomLoadFunctions))}();function callDomLoadFunctions(){if(isDomLoaded)return;try{var t=doc.getElementsByTagName("body")[0].appendChild(createElement("span"));t.parentNode.removeChild(t)}catch(e){return}isDomLoaded=!0;var dl=domLoadFnArr.length;for(var i=0;i<dl;i++)domLoadFnArr[i]()}function addDomLoadEvent(fn){isDomLoaded?fn():domLoadFnArr[domLoadFnArr.length]=fn}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF)win.addEventListener("load",fn,!1);else if(typeof doc.addEventListener!=UNDEF)doc.addEventListener("load",fn,!1);else if(typeof win.attachEvent!=UNDEF)addListener(win,"onload",fn);else if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld(),fn()}}else win.onload=fn}function main(){plugin?testPlayerVersion():matchVersions()}function testPlayerVersion(){var b=doc.getElementsByTagName("body")[0],o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);var t=b.appendChild(o);if(t){var counter=0;(function(){if(typeof t.GetVariable!=UNDEF){var d=t.GetVariable("$version");d&&(d=d.split(" ")[1].split(","),ua.pv=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)])}else if(counter<10){counter++,setTimeout(arguments.callee,10);return}b.removeChild(o),t=null,matchVersions()})()}else matchVersions()}function matchVersions(){var rl=regObjArr.length;if(rl>0)for(var i=0;i<rl;i++){var id=regObjArr[i].id,cb=regObjArr[i].callbackFn,cbObj={success:!1,id:id};if(ua.pv[0]>0){var obj=getElementById(id);if(obj)if(hasPlayerVersion(regObjArr[i].swfVersion)&&!(ua.wk&&ua.wk<312))setVisibility(id,!0),cb&&(cbObj.success=!0,cbObj.ref=getObjectById(id),cb(cbObj));else if(regObjArr[i].expressInstall&&canExpressInstall()){var att={};att.data=regObjArr[i].expressInstall,att.width=obj.getAttribute("width")||"0",att.height=obj.getAttribute("height")||"0",obj.getAttribute("class")&&(att.styleclass=obj.getAttribute("class")),obj.getAttribute("align")&&(att.align=obj.getAttribute("align"));var par={},p=obj.getElementsByTagName("param"),pl=p.length;for(var j=0;j<pl;j++)p[j].getAttribute("name").toLowerCase()!="movie"&&(par[p[j].getAttribute("name")]=p[j].getAttribute("value"));showExpressInstall(att,par,id,cb)}else displayAltContent(obj),cb&&cb(cbObj)}else{setVisibility(id,!0);if(cb){var o=getObjectById(id);o&&typeof o.SetVariable!=UNDEF&&(cbObj.success=!0,cbObj.ref=o),cb(cbObj)}}}}function getObjectById(objectIdStr){var r=null,o=getElementById(objectIdStr);if(o&&o.nodeName=="OBJECT")if(typeof o.SetVariable!=UNDEF)r=o;else{var n=o.getElementsByTagName(OBJECT)[0];n&&(r=n)}return r}function canExpressInstall(){return!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)&&!(ua.wk&&ua.wk<312)}function showExpressInstall(att,par,replaceElemIdStr,callbackFn){isExpressInstallActive=!0,storedCallbackFn=callbackFn||null,storedCallbackObj={success:!1,id:replaceElemIdStr};var obj=getElementById(replaceElemIdStr);if(obj){obj.nodeName=="OBJECT"?(storedAltContent=abstractAltContent(obj),storedAltContentId=null):(storedAltContent=obj,storedAltContentId=replaceElemIdStr),att.id=EXPRESS_INSTALL_ID;if(typeof att.width==UNDEF||!/%$/.test(att.width)&&parseInt(att.width,10)<310)att.width="310";if(typeof att.height==UNDEF||!/%$/.test(att.height)&&parseInt(att.height,10)<137)att.height="137";doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",fv="MMredirectURL="+encodeURI(win.location).toString().replace(/&/g,"%26")+"&MMplayerType="+pt+"&MMdoctitle="+doc.title;typeof par.flashvars!=UNDEF?par.flashvars+="&"+fv:par.flashvars=fv;if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceElemIdStr+="SWFObjectNew",newObj.setAttribute("id",replaceElemIdStr),obj.parentNode.insertBefore(newObj,obj),obj.style.display="none",function(){obj.readyState==4?obj.parentNode.removeChild(obj):setTimeout(arguments.callee,10)}()}createSWF(att,par,replaceElemIdStr)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj),el.parentNode.replaceChild(abstractAltContent(obj),el),obj.style.display="none",function(){obj.readyState==4?obj.parentNode.removeChild(obj):setTimeout(arguments.callee,10)}()}else obj.parentNode.replaceChild(abstractAltContent(obj),obj)}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie)ac.innerHTML=obj.innerHTML;else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++)(c[i].nodeType!=1||c[i].nodeName!="PARAM")&&c[i].nodeType!=8&&ac.appendChild(c[i].cloneNode(!0))}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(ua.wk&&ua.wk<312)return r;if(el){typeof attObj.id==UNDEF&&(attObj.id=id);if(ua.ie&&ua.win){var att="";for(var i in attObj)attObj[i]!=Object.prototype[i]&&(i.toLowerCase()=="data"?parObj.movie=attObj[i]:i.toLowerCase()=="styleclass"?att+=' class="'+attObj[i]+'"':i.toLowerCase()!="classid"&&(att+=" "+i+'="'+attObj[i]+'"'));var par="";for(var j in parObj)parObj[j]!=Object.prototype[j]&&(par+='<param name="'+j+'" value="'+parObj[j]+'" />');el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>",objIdArr[objIdArr.length]=attObj.id,r=getElementById(attObj.id)}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj)attObj[m]!=Object.prototype[m]&&(m.toLowerCase()=="styleclass"?o.setAttribute("class",attObj[m]):m.toLowerCase()!="classid"&&o.setAttribute(m,attObj[m]));for(var n in parObj)parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"&&createObjParam(o,n,parObj[n]);el.parentNode.replaceChild(o,el),r=o}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName),p.setAttribute("value",pValue),el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);obj&&obj.nodeName=="OBJECT"&&(ua.ie&&ua.win?(obj.style.display="none",function(){obj.readyState==4?removeObjectInIE(id):setTimeout(arguments.callee,10)}()):obj.parentNode.removeChild(obj))}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj)typeof obj[i]=="function"&&(obj[i]=null);obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn),listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");return v[0]=parseInt(v[0],10),v[1]=parseInt(v[1],10)||0,v[2]=parseInt(v[2],10)||0,pv[0]>v[0]||pv[0]==v[0]&&pv[1]>v[1]||pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]?!0:!1}function createCSS(sel,decl,media,newStyle){if(ua.ie&&ua.mac)return;var h=doc.getElementsByTagName("head")[0];if(!h)return;var m=media&&typeof media=="string"?media:"screen";newStyle&&(dynamicStylesheet=null,dynamicStylesheetMedia=null);if(!dynamicStylesheet||dynamicStylesheetMedia!=m){var s=createElement("style");s.setAttribute("type","text/css"),s.setAttribute("media",m),dynamicStylesheet=h.appendChild(s),ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0&&(dynamicStylesheet=doc.styleSheets[doc.styleSheets.length-1]),dynamicStylesheetMedia=m}ua.ie&&ua.win?dynamicStylesheet&&typeof dynamicStylesheet.addRule==OBJECT&&dynamicStylesheet.addRule(sel,decl):dynamicStylesheet&&typeof doc.createTextNode!=UNDEF&&dynamicStylesheet.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}function setVisibility(id,isVisible){if(!autoHideShow)return;var v=isVisible?"visible":"hidden";isDomLoaded&&getElementById(id)?getElementById(id).style.visibility=v:createCSS("#"+id,"visibility:"+v)}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/,hasBadChars=regex.exec(s)!=null;return hasBadChars&&typeof encodeURIComponent!=UNDEF?encodeURIComponent(s):s}var cleanup=function(){ua.ie&&ua.win&&window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++)listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2]);var il=objIdArr.length;for(var j=0;j<il;j++)removeSWF(objIdArr[j]);for(var k in ua)ua[k]=null;ua=null;for(var l in swfobject)swfobject[l]=null;swfobject=null})}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr,callbackFn){if(ua.w3&&objectIdStr&&swfVersionStr){var regObj={};regObj.id=objectIdStr,regObj.swfVersion=swfVersionStr,regObj.expressInstall=xiSwfUrlStr,regObj.callbackFn=callbackFn,regObjArr[regObjArr.length]=regObj,setVisibility(objectIdStr,!1)}else callbackFn&&callbackFn({success:!1,id:objectIdStr})},getObjectById:function(objectIdStr){if(ua.w3)return getObjectById(objectIdStr)},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj,callbackFn){var callbackObj={success:!1,id:replaceElemIdStr};ua.w3&&!(ua.wk&&ua.wk<312)&&swfUrlStr&&replaceElemIdStr&&widthStr&&heightStr&&swfVersionStr?(setVisibility(replaceElemIdStr,!1),addDomLoadEvent(function(){widthStr+="",heightStr+="";var att={};if(attObj&&typeof attObj===OBJECT)for(var i in attObj)att[i]=attObj[i];att.data=swfUrlStr,att.width=widthStr,att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT)for(var j in parObj)par[j]=parObj[j];if(flashvarsObj&&typeof flashvarsObj===OBJECT)for(var k in flashvarsObj)typeof par.flashvars!=UNDEF?par.flashvars+="&"+k+"="+flashvarsObj[k]:par.flashvars=k+"="+flashvarsObj[k];if(hasPlayerVersion(swfVersionStr)){var obj=createSWF(att,par,replaceElemIdStr);att.id==replaceElemIdStr&&setVisibility(replaceElemIdStr,!0),callbackObj.success=!0,callbackObj.ref=obj}else{if(xiSwfUrlStr&&canExpressInstall()){att.data=xiSwfUrlStr,showExpressInstall(att,par,replaceElemIdStr,callbackFn);return}setVisibility(replaceElemIdStr,!0)}callbackFn&&callbackFn(callbackObj)})):callbackFn&&callbackFn(callbackObj)},switchOffAutoHideShow:function(){autoHideShow=!1},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){return ua.w3?createSWF(attObj,parObj,replaceElemIdStr):undefined},showExpressInstall:function(att,par,replaceElemIdStr,callbackFn){ua.w3&&canExpressInstall()&&showExpressInstall(att,par,replaceElemIdStr,callbackFn)},removeSWF:function(objElemIdStr){ua.w3&&removeSWF(objElemIdStr)},createCSS:function(selStr,declStr,mediaStr,newStyleBoolean){ua.w3&&createCSS(selStr,declStr,mediaStr,newStyleBoolean)},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(q){/\?/.test(q)&&(q=q.split("?")[1]);if(param==null)return urlEncodeIfNecessary(q);var pairs=q.split("&");for(var i=0;i<pairs.length;i++)if(pairs[i].substring(0,pairs[i].indexOf("="))==param)return urlEncodeIfNecessary(pairs[i].substring(pairs[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(isExpressInstallActive){var obj=getElementById(EXPRESS_INSTALL_ID);obj&&storedAltContent&&(obj.parentNode.replaceChild(storedAltContent,obj),storedAltContentId&&(setVisibility(storedAltContentId,!0),ua.ie&&ua.win&&(storedAltContent.style.display="block")),storedCallbackFn&&storedCallbackFn(storedCallbackObj)),isExpressInstallActive=!1}}}}();
_package("com.neuromantic.arete.events",_class("Event",{static_CHANGE:"change",static_RESIZE:"resize",type:"",data:null,source:null,Event:function(type,data){this.type=type,this.data=data}}));
_package("com.grabnetworks.player",_import("com.neuromantic.arete.events.Event"),_class("PlayerEvent")._extends("Event",{static_PLAYER_READY:"PlayerSWFReady",static_VIDEO_KEYFRAME:"VideoKeyFrameUpdate",static_CONTENT_LOADED:"ContentLoaded",static_CONTENT_ERROR:"ContentError",static_VIDEO_ENDED:"VideoPlaybackEnded",static_VIDEO_PAUSED:"VideoPlaybackPaused",static_VIDEO_STARTED:"VideoPlaybackStarted",static_VIDEO_PLAYING:"VideoPlaybackPlayed",static_PREROLL_ENDED:"PreRollPlaybackEnded",static_PREROLL_STARTED:"PreRollPlaybackStarted",static_PREROLL_CLICKED:"PreRollSelected"}));
_package("com.neuromantic.arete.events",_class("Notifier",{private_notify:function(event){event.source=this;if(this._.handlers[event.type]){event.source=this;for(var index in this._.handlers[event.type])this._.handlers[event.type][index](event)}},Notifier:function(){},private_handlers:{},on:function(eventType,eventHandler){this._.handlers[eventType]=this._.handlers[eventType]||[],this._.handlers[eventType].push(eventHandler)},off:function(eventType,eventHandler){if(this._.handlers[eventType]){if(eventHandler===undefined)return delete this._.handlers[eventType];var index=this._.handlers[eventType].indexOf(eventHandler);index>-1&&this._.handlers[eventType].splice(index,1)}}}));
var VISIBILITY=function(){function _isVisible(el,t,r,b,l,w,h){var p=el.parentNode,VISIBLE_PADDING=2;if(9===p.nodeType)return!0;if("0"===_getStyle(el,"opacity")||"none"===_getStyle(el,"display")||"hidden"===_getStyle(el,"visibility"))return!1;if("undefined"==typeof t||"undefined"==typeof r||"undefined"==typeof b||"undefined"==typeof l||"undefined"==typeof w||"undefined"==typeof h)t=el.offsetTop,l=el.offsetLeft,b=t+el.offsetHeight,r=l+el.offsetWidth,w=el.offsetWidth,h=el.offsetHeight;if(p){if(("hidden"===_getStyle(p,"overflow")||"scroll"===_getStyle(p,"overflow"))&&el.offsetParent===p)if(l+VISIBLE_PADDING>p.offsetWidth+p.scrollLeft||l+w-VISIBLE_PADDING<p.scrollLeft||t+VISIBLE_PADDING>p.offsetHeight+p.scrollTop||t+h-VISIBLE_PADDING<p.scrollTop)return!1;return el.offsetParent===p&&(l+=p.offsetLeft,t+=p.offsetTop),_isVisible(p,t,r,b,l,w,h)}return!0}function _getStyle(el,property){if(window.getComputedStyle)return document.defaultView.getComputedStyle(el)[property];if(el.currentStyle)return el.currentStyle[property]}return{getStyle:_getStyle,isVisible:_isVisible}}();
_package("com.neuromantic.arete.events",_import("com.neuromantic.arete.events.Event"),_class("MouseEvent")._extends("Event",{static_CLICK:"click",static_OVER:"over",static_OUT:"out",static_MOVE:"mouseMove",mouseX:0,mouseY:0,MouseEvent:function(type,target){this._super(type,target)}}));
_package("com.neuromantic.arete.events",_import("com.neuromantic.arete.events.Event"),_class("KeyboardEvent")._extends("Event",{static_PRESS:"keyPress",static_UP:"keyUp",static_DOWN:"keyDown"}));
_package("com.neuromantic.arete.events",_import("com.neuromantic.arete.events.Event"),_class("FocusEvent")._extends("Event",{static_IN:"focusIn",static_OUT:"focusOut"}));
_package("com.neuromantic.arete.dom",_import("com.useallfive.VISIBILITY"),_import("com.neuromantic.arete.events.Notifier"),_import("com.neuromantic.arete.events.Event"),_import("com.neuromantic.arete.events.MouseEvent"),_import("com.neuromantic.arete.events.KeyboardEvent"),_import("com.neuromantic.arete.events.FocusEvent"),_class("Element")._extends("Notifier",{static_byID:function(id,root){root=root||document;var el=root.getElementById(id);return el?new Element(el):null},static_byClass:function(className,root){root=root||document;var tags=root.getElementsByClassName(className),list=[];if(tags)for(var i=0;i<tags.length;i++)list[i]=new Element(tags[i]);return list},static_all:function(ElementClass,root){root=root||document;var tags=root.getElementsByTagName(ElementClass.TYPE),list=[];for(var i=0;i<tags.length;i++)list[i]=new Element(tags[i]);return list},static_first:function(selector,root){root=root||document;var results=Element.find(selector);return results[0]||results},static_find:function(selector,root){root=root||document;if(selector.TYPE)return Element.all(selector);switch(selector.charAt(0)){case"#":return Element.byID(selector.slice(1),root);case".":return Element.byClass(selector.slice(1),root);default:return Element.all(selector,root)}},private_tag:null,private_alpha:1,private_visible:null,private_width:null,private_height:null,private_y:0,private_x:0,private_mouseEnabled:!0,private_onmouseover:function(e){this._.mouseNotify(MouseEvent.OVER,e)},private_onmouseout:function(e){this._.mouseNotify(MouseEvent.OUT,e)},private_onmousedown:function(e){this._.mouseNotify(MouseEvent.DOWN,e)},private_onmouseup:function(e){this._.mouseNotify(MouseEvent.UP,e)},private_onclick:function(e){this._.mouseNotify(MouseEvent.CLICK,e)},private_onkeydown:function(e){this._.keyNotify(KeyboardEvent.DOWN,e)},private_onkeyup:function(e){this._.keyNotify(KeyboardEvent.UP,e)},private_onkeypress:function(e){this._.notify(KeyboardEvent.PRESS,e)},private_onfocus:function(e){this._.notify(new FocusEvent(FocusEvent.IN))},private_onfocus:function(e){this._.notify(new FocusEvent(FocusEvent.IN))},private_onblur:function(){this._.notify(new FocusEvent(FocusEvent.OUT))},private_onchange:function(){this._.notify(new Event(Event.CHANGE))},private_mouseNotify:function(type,nativeEvent){nativeEvent=nativeEvent||window.event,nativeEvent.stopPropagation?nativeEvent.stopPropagation():nativeEvent.cancelBubble=!0,this._.mouseEnabled&&this._.notify(new MouseEvent(type))},private_keyNotify:function(type,nativeEvent){this._.notify(new KeyboardEvent(type))},Element:function(tag,atts){atts=atts||{};if(!tag)throw new TypeError("Arete Elements require an argument on instantiation");if(typeof document=="object"&&tag===document||typeof tag.nodeType=="number"&&tag.attributes&&tag.childNodes&&tag.cloneNode)this._.tag=tag;else{if(typeof tag!="string")throw new TypeError("Arete Elements may only be instantiated with an HTML node or tag name string argument");try{this._.tag=document.createElement(tag),typeof atts.className=="undefined"&&(atts.className=this._className),typeof atts.style=="undefined"||typeof atts.style.position=="undefined"}catch(error){throw new TypeError("Arete Elements require a valid HTML tag name")}}this.tag(atts),this._.tag.onmouseover=this._.onmouseover,this._.tag.onmouseout=this._.onmouseout,this._.tag.onmousedown=this._.onmousedown,this._.tag.onmouseup=this._.onmouseup,this._.tag.onclick=this._.onclick,this._.tag.onkeydown=this._.onkeydown,this._.tag.onkeyup=this._.onkeyup,this._.tag.onkeypress=this._.onkeypress,this._.tag.onfocus=this._.unfocus,this._.tag.onblur=this._.onblur,this._.tag.onchange=this._.onchange},find:function(selector){return Element.find(selector,this.tag())},first:function(selector){return Element.first(selector,this.tag())},append:function(child){this._.tag.appendChild(child.tag())},replace:function(newChild,oldChild){this._.tag.replaceChild(newChild.tag(),oldChild.tag())},remove:function(child){if(child)return this._.tag.removeChild(child.tag());this.parent().remove(this)},set_tag:function(value){for(var a in value)a==="style"?this.style(value.style):this._.tag[a]=value[a]},get_tag:function(){return this._.tag},set_parent:function(parent){parent.append(this)},get_parent:function(){return this._.tag.parentNode?new Element(this._.tag.parentNode):null},set_text:function(value){this.tag({innerHTML:value})},get_text:function(){return this._.tag.innerText||this._.tag.textContent},set_style:function(value){for(var s in value)typeof s=="string"&&(this._.tag.style[s]=value[s])},get_style:function(){return this._.tag.currentStyle?this._.tag.currentStyle:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(this._.tag,""):this._.tag.style},get_height:function(){return this._.height=this._.height||this._.tag.offsetHeight||0,Number(this._.height)},set_height:function(value){this._.height=value,this.style({height:value+"px"})},get_width:function(){return this._.width=this._.width||this._.tag.offsetWidth||0,Number(this._.width)},set_width:function(value){this._.width=value,this.style({width:this._.width+"px"})},get_x:function(value){return this._.x},set_x:function(value){this._.x=value,this.style({left:this._.x+"px"})},get_y:function(){return this._.y},set_y:function(value){this._.y=value,this.style({top:this._.y+"px"})},get_alpha:function(){return this._.alpha},set_alpha:function(value){this._.tag.style.opacity=value,this._.tag.style.filter="alpha(opacity="+value*100+")",this._.alpha=value},get_visible:function(){return this._.visible===null&&(this._.visible=this._.tag.style.visible!="hidden"),this._.visible},set_visible:function(value){this._.visible=value,this._.tag.style.visibility=this._.visible?"visible":"hidden"},get_autoAlpha:function(){return this._.alpha},set_autoAlpha:function(value){this.alpha(value),this.visible(this._.alpha>0)},get_viewable:function(){return VISIBILITY._isVisible(this._.tag)}}));
_package("com.neuromantic.arete.dom.elements",_import("com.neuromantic.arete.dom.Element"),_class("Script")._extends("Element",{static_TYPE:"script",Script:function(atts){this._super(Script.TYPE,atts)}}));
_package("com.neuromantic.arete.dom",_import("com.neuromantic.arete.dom.Element"),_class("Document")._extends("Element",{static_TYPE:"document",static_url:function(){return location.href},static_element:function(){return new Element(document)},Document:function(atts){this._super(Document.TYPE,atts)}}));
_package("com.neuromantic.arete.dom.document",_import("com.neuromantic.arete.dom.Element"),_import("com.neuromantic.arete.dom.Document"),_class("Head")._extends("Element",{static_TYPE:"head",static_element:function(){return Document.element().find(Head)[0]},Head:function(atts){this._super(Head.TYPE,atts)}}));
_package("com.neuromantic.arete.events",_import("com.neuromantic.arete.events.Event"),_class("LoadingEvent")._extends("Event",{static_STARTED:"loadingStarted",static_COMPLETE:"loadingComplete",static_PROGRESS:"loadingProgress"}));
_package("com.neuromantic.arete.net",_import("com.neuromantic.arete.events.Notifier"),_import("com.neuromantic.arete.dom.elements.Script"),_import("com.neuromantic.arete.dom.document.Head"),_import("com.neuromantic.arete.events.LoadingEvent"),_class("JSONP")._extends("Notifier",{private_padding:"jsonp",private_uid:null,private_script:null,static_receivers:[],private_onJSONP:function(data){this._.notify(new LoadingEvent(LoadingEvent.COMPLETE,data))},JSONP:function(padding){padding&&(this._.padding=padding)},load:function(url){this._.uid=JSONP.receivers.length,com.neuromantic.arete.net.JSONP.receivers.push(this._.onJSONP);var callback="com.neuromantic.arete.net.JSONP.receivers["+this._.uid+"]";this._.script=document.createElement("script");var token=url.indexOf("?")<0?"?":"&",scriptSrc=url+token+this._.padding+"="+callback;this._.script=new Script({type:"text/javascript",language:"javascript",src:scriptSrc}),Head.element().append(this._.script)}}));
_package("com.grabnetworks.loading",_import("com.neuromantic.arete.net.JSONP"),_import("com.neuromantic.arete.dom.Document"),_class("ContentLoader")._extends("JSONP",{private_server:"http://content.grabnetworks.com",ContentLoader:function(environment){switch(environment){case"qa":this._.server="http://content.grabqa.com"}this._super("jsonp")},loadOptions:function(embedID){this._super().load(this._.server+"/options/"+embedID+".json")},loadContent:function(contentID){var type,guid;switch(contentID.length){case 40:guid=contentID,type="v";break;case 41:guid=contentID.substr(1),type=contentID.substr(0,1);break;default:throw new Error("Invalid GUID length")}var href=encodeURIComponent(Document.url());this.load(this._.server+"/"+type+"/"+guid+"?from="+href)}}));
_package("com.neuromantic.arete.dom.elements",_import("com.neuromantic.arete.dom.Element"),_class("Div")._extends("Element",{static_TYPE:"div",Div:function(atts){this._super(Div.TYPE,atts)}}));
_package("com.neuromantic.arete.dom.elements",_import("com.neuromantic.arete.dom.Element"),_class("Media")._extends("Element",{Media:function(tag,atts){this._super(tag,atts)},load:function(url){this.tag({src:url})},get_url:function(){return this._.tag.src}}));
_package("com.neuromantic.arete.dom.elements.media",_import("com.neuromantic.arete.dom.elements.Media"),_class("Video")._extends("Media",{static_TYPE:"video",Video:function(atts){this._super(Video.TYPE,atts)},play:function(){this._.tag.play()},pause:function(){this._.tag.pause()},stop:function(){this.pause(),this.load(null)},get_seek:function(){return this._.tag.currentTime*1e3},set_seek:function(ms){this._.tag.currentTime=ms*.001},duration:function(){return this._.tag.seekable.end()*1e3}}));
_package("com.neuromantic.arete.environment",_class("Browser",{static_isMobile:function(){return navigator.userAgent||navigator.vendor||window.opera?function(a){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera):!1}}));
_package("com.neuromantic.util",_class("URIUtil",{static_parse:function(uriString){var o=URIUtil.options,m=o.parser[o.strictMode?"strict":"loose"].exec(uriString),uri={},i=o.key.length;while(i--)uri[o.key[i]]=m[i]||"";return uri[o.q.name]={},uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){$1&&(uri[o.q.name][$1]=$2)}),uri},static_options:{strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}}}));
_package("com.grabnetworks.player",_import("com.deconcept.swfobject"),_import("com.grabnetworks.player.PlayerEvent"),_import("com.grabnetworks.loading.ContentLoader"),_import("com.neuromantic.arete.dom.elements.Div"),_import("com.neuromantic.arete.dom.elements.media.Video"),_import("com.neuromantic.arete.environment.Browser"),_import("com.neuromantic.arete.utils.URIUtil"),_import("com.neuromantic.arete.net.JSONP"),_import("com.neuromantic.arete.events.LoadingEvent"),_import("com.neuromantic.arete.events.Notifier"),_class("Player")._extends("Div",{static_local:!1,static_players:[],private_swf:null,private_video:null,private_settings:{id:1720202,width:400,height:300},private_deferredCalls:[],private_ready:!1,private_div:null,private_parent:null,private_options:null,private_environment:"grabnetworks",private_optionsLoader:null,private_contentLoader:null,private_contentServer:"http://content.grabnetworks.com/",private_defer:function(fn,argument){var deferredCall;if(typeof fn=="function")deferredCall=function(){fn(argument)};else if(this._.swf){var _this=this;deferredCall=function(){_this._.swf[fn](argument)}}else deferredCall={name:fn,argument:argument};try{deferredCall()}catch(e){this._.deferredCall.push(deferredCall)}},private_eventRouter:function(eventObject){if(eventObject.event==PlayerEvent.PLAYER_READY)for(var i=0;i<this._.deferredCalls.length;i++){var fn=this._.deferredCall;if(fn){var name=fn.name,arg=fn.argument;name&&(fn=this._.swf[name]),typeof arg=="undefined"?fn():fn(arg),this._.deferredCall=null}}this._.notify(new PlayerEvent(eventObject.event,eventObject.data))},private_playerID:"",private_onSWFObject:function(swf){swf.ref?(this._.swf=swf.ref,this.type="v5"):(this._.loadOptions(this._.settings.id),this.type="h5")},private_loadOptions:function(id){this._.optionsLoader=new ContentLoader,this._.optionsLoader.on(LoadingEvent.COMPLETE,this._.onOptionsLoaded),this._.optionsLoader.loadOptions(id)},private_onOptionsLoaded:function(event){var options=event.data;this._.options=options.grabnetworks;var guid=this._.settings.content||this._.options.content;this._.loadContent(guid)},private_loadContent:function(contentID){this._.contentLoader=new ContentLoader,this._.contentLoader.on(LoadingEvent.COMPLETE,this._.onContentLoaded),this._.contentLoader.loadContent(guid)},private_onContentLoaded:function(event){var content=event.data;content=content.videos?content.videos[0]:content,content.video.media.mobile?(this._.video||(this._.video=new Video({height:this._.settings.height,width:this._.settings.width,controls:"controls",preload:"auto",id:this._.playerID,style:{background:"black"}})),this._.video.tag({autoplay:this._.settings.autoPlay||this._.options.player.behavior.autoPlay?"autoplay":null}),this._.video.load(content.video.media.mobile.url),this._.div&&(this.replace(this._.video,this._.div),this._.div=null)):(this._.div.style({display:"block",textAlign:"center",verticalAlign:"middle",background:"url("+content.video.media.preview+")",color:"#FFFFFF",width:this._.settings.width+"px",height:this._.settings.height+"px",fontSize:"150px"}),this._.div.text("mobile?<br/>NOPE.")),typeof this._.onReady=="function"&&(this._.onReady(),this._.onReady=null)},private_load:function(guid){this._.video?this._.loadContent(guid):this._.swf.loadNewVideo(guid)},private_play:function(){this._.video?this._.video.play():this._swf.playVideo()},private_pause:function(){this._.video?this._.video.pause():this._swf.pauseVideo()},private_stop:function(){this._.video?this._.video.stop():this._.swf.stopVideo()},private_seek:function(ms){this._.video?this._.video.seek(ms):this._.swf.seekVideoToMS(ms)},private_seekPercent:function(pct){this._.video?this._.seek(pct*.01*this._.video.duration):this._.swf.seekVideoTo(pct)},private_setVolume:function(level){this._.video?this._.video.volume=level*.01:this._.swf.setVolume(level)},Player:function(settings){this._super(),settings.variant===""&&delete settings.variant,settings=this._.settings=settings||this._.settings;var params={allowScriptAccess:"always",allowFullScreen:"true",wmode:"transparent",menu:"false",bgcolor:"#000000",quality:"high"},env=settings.env||"";delete settings.env;var width=settings.width||640,height=settings.height||360,flashvars=settings;this.id=settings.id;var namespace="Player.players["+this.id+"]",eventhandler="_.eventRouter";flashvars.namespace=namespace,flashvars.eventhandler=eventhandler,this._.playerID="GrabPlayer"+settings.id,this._.divID="grabDiv"+this.id;var div=Element.byID(this._.divID);div?div.parent().replace(this,div):(div=new Div({id:this._.divID}),settings.parent&&(new Element(settings.parent)).append(this)),this.append(div),this._.div=div;var attributes={id:this._.playerID,name:this._.playerID},swfDir=settings.local?settings.local+"/":"http://player."+this._.environment+".com/v5"+env+"/";swfobject.embedSWF(swfDir+"Player.swf",this._.divID,width,height,"9.0.0",!1,flashvars,params,attributes,this._.onSWFObject),Player.players[this.id]=this},id:"uninitialized",type:"uninitialized",hide:function(){this.style({display:"none",visibility:"hidden"})},show:function(){this.style({display:"block",visibility:"visible"})},loadNewVideo:function(guid){this._.defer(this._.load,guid)},toggleDebug:function(){this._.defer("toggleDebug")},stopVideo:function(){this._.defer(this._.stop)},showEmbed:function(){this._.defer("showEmbed")},hideEmbed:function(){this._.defer("hideEmbed")},hideInfo:function(){this._.defer("hideInfo")},showInfo:function(){this._.defer("showInfo")},showSharing:function(){this._.defer("showSharing")},hideSharing:function(){this._.defer("hideSharing")},showEmail:function(){this._.defer("showEmail")},hideEmail:function(){this._defer("hideEmail")},pauseVideo:function(){this._.defer(this._.pause)},playVideo:function(){this._.defer(this._.play)},replayVideo:function(){this._.defer("replayVideo")},seekVideoTo:function(percent){this._.defer(this._.seekPercent,percent)},seekVideoToMS:function(milliseconds){this._.defer(this._.seek,milliseconds)},setVolume:function(level){this._.defer(this._.setVolume,level)},mute:function(){this._.defer("mute")},skipAd:function(){this._.defer("skipAd")},videoTotalTime:function(){return this._.video?this._.video.duration():this._.swf.videoTotalTime()},videoCurrentTime:function(){return this._.swf.videoCurrentTime()},videoTitleText:function(){return this._.swf.videoTitleText()},videoDescriptionText:function(){return this._.swf.videoDescriptionText()},videoSourceLogo:function(){return this._.swf.videoSourceLogo()},videoSourceURL:function(){return this._.swf.videoSourceURL()},videoInfo:function(){return this._.swf.videoInfo()}}));
_package("com.neuromantic.arete.dom.elements.media",_import("com.neuromantic.arete.dom.elements.Media"),_import("com.neuromantic.arete.events.LoadingEvent"),_class("Img")._extends("Media",{static_TYPE:"img",static_all:function(root){return Element.all(Img,root)},private_nativeWidth:null,private_nativeHeight:null,private_loaded:!1,private_onload:function(){this._.loaded=!0,this._.nativeWidth=this._.tag.width,this._.nativeHeight=this._.tag.height,this._.height!==null&&this.height(this._.height),this._.width!==null&&this.width(this._.width),this._.notify(new LoadingEvent(LoadingEvent.LOADED))},Img:function(atts){atts=atts||{},atts.onload=this._.onload,this._super(Img.TYPE,atts)},get_loaded:function(){return this._.loaded},get_aspect:function(){return this._.nativeWidth/this._.nativeHeight},set_width:function(value){this._.loaded?this._super().width(value):this._.width=value},set_height:function(value){this._.loaded?this._super().height(value):this._.height=value}}));
_package("com.grabnetworks.vidify",_import("com.grabnetworks.player.Player"),_import("com.neuromantic.arete.dom.Element"),_import("com.neuromantic.arete.dom.elements.Div"),_import("com.neuromantic.arete.dom.elements.media.Img"),_import("com.neuromantic.arete.events.MouseEvent"),_class("Badger")._extends("Div",{private_badge:null,private_onBadgeClicked:function(event){this._.notify(event)},Badger:function(target,badgeImg){this._super();var width=target.width(),height=target.height(),parent=target.parent(),style=target.style();this.style(style),style={position:"relative",display:style.display==="inline"?"inline-block":style.display},this.style(style),this.width(width),this.height(height),target.style({border:0,margin:0,padding:0}),parent.replace(this,target),this.append(target),this._.badge=badgeImg,this._.badge.style({position:"absolute",border:0,zIndex:10003}),this._.badge.on(MouseEvent.CLICK,this._.onBadgeClicked),this.append(this._.badge)},set_visible:function(value){this._.badge.visible(value)}}));
_package("com.grabnetworks.ui",_import("com.neuromantic.arete.dom.elements.media.Img"),_class("CloseButton")._extends("Img",{CloseButton:function(atts){this._super(atts),this.load("http://static.grab-media.com/images/ui/close.png")}}));
_package("com.grabnetworks.loading",_import("com.neuromantic.arete.net.JSONP"),_class("CatalogLoader")._extends("JSONP",{private_server:"http://catalog.grabnetworks.com",CatalogLoader:function(environment){switch(environment){case"qa":this._.server="http://catalog.grabqa.com";break;case"test":this._.server="http://catalog2.grabtest.com:8080"}this._super("jsonp")},loadMatch:function(){var href=encodeURIComponent(global.location.href.toString());this._super().load(this._.server+"/catalogs/1/videos/search.content?search_debug=1&catalog_id=1&date_weight=25.0&search_algo=match&url="+href)},loadSimilar:function(){var href=encodeURIComponent(global.location.href.toString());this._super().load(this._.server+"/catalogs/1/videos/search.content?search_debug=1&catalog_id=1&date_weight=25.0&grabBoost=20.0&vcl_search=1&url="+href)}}));
_package("com.grabnetworks.tracking",_import("com.neuromantic.arete.dom.elements.media.Img"),_class("Ping",{private_server:"http://et.grabtest.com",private_route:"/ping",private_params:{},Ping:function(params){params&&this.send(params)},set_params:function(params){for(var key in params)this._.params[key]=params[key]},get_params:function(){return this._.params},send:function(attributes){this.params(attributes);var query="?";for(var key in this._.params)query+=key+"="+this._.params[key]+"&";query=query.slice(0,-1),new Img({src:this._.server+this._.route+query})}}));
_package("com.grabnetworks.tracking",_import("com.grabnetworks.tracking.Ping"),_class("PlaybackPinger",{private_productID:"",private_player:null,private_ping:function(params){var ping=new Ping;ping.params({p:this._.productID,i:this._.player.id,t:this._.player.type}),ping.send(params)},private_onPlayerVideoStarted:function(event){this._.ping({e:"view"})},private_onPlayerVideoPlayed:function(event){this._.ping({e:"play"})},private_onPlayerPlayerSWFReady:function(event){},private_onPlayerVideoKeyFrame:function(event){},private_onPlayerPreRollStarted:function(event){this._.ping({e:"preroll"})},PlaybackPinger:function(player,productID){this._.player=player,this._.productID=productID,player.on(PlayerEvent.VIDEO_STARTED,this._.onPlayerVideoStarted),player.on(PlayerEvent.PLAYER_READY,this._.onPlayerPlayerSWFReady),player.on(PlayerEvent.VIDEO_KEYFRAME,this._.onPlayerVideoKeyFrame),player.on(PlayerEvent.CONTENT_ERROR,this._.onPlayerContentError),player.on(PlayerEvent.VIDEO_ENDED,this._.onPlayerVideoEnded),player.on(PlayerEvent.VIDEO_PAUSED,this._.onPlayerVideoPaused),player.on(PlayerEvent.VIDEO_PLAYING,this._.onPlayerVideoPlayed),player.on(PlayerEvent.PREROLL_ENDED,this._.onPlayerPreRollEnded),player.on(PlayerEvent.PREROLL_STARTED,this._.onPlayerPreRollStarted),player.on(PlayerEvent.PREROLL_CLICKED,this._.onPlayerPreRollSelected)}}));
_package("com.neuromantic.arete.dom",_class("Window",{static_onLoad:function(handler){window.addEventListener?window.addEventListener("load",handler,!1):window.attachEvent&&window.attachEvent("onload",handler)}}));
_package("com.neuromantic.arete.events",_import("com.neuromantic.arete.events.Event"),_class("TimerEvent")._extends("Event",{static_START:"timerStart",static_STOP:"timerStop",static_TICK:"timerTick",static_COMPLETE:"timerComplete",static_RESET:"timerReset"}));
_package("com.neuromantic.arete.fx",_import("com.neuromantic.arete.events.Notifier"),_import("com.neuromantic.arete.events.TimerEvent"),_class("Timer")._extends("Notifier",{private_tickTime:0,private_remaining:0,private_repeat:0,private_timeout:null,private_running:!1,Timer:function(tickTime,repeat){this._super(),this._.tickTime=tickTime,this._.repeat=repeat||-1,this._.remaining=repeat},private_tick:function(){this._.remaining>0||this._.repeat===-1?(this._.notify(new TimerEvent(TimerEvent.TICK)),this._.advance()):(this._.notify(new TimerEvent(TimerEvent.COMPLETE)),this.stop()),this._.remaining--},private_advance:function(){this._.running&&(this.stop(),this.start())},reset:function(){this._.notify(new TimerEvent(TimerEvent.RESET)),this._.remaining=this._.repeat,this._.advance()},start:function(){this._.timeout||(this._.notify(new TimerEvent(TimerEvent.START)),this._.timeout=setTimeout(this._.tick,this._.tickTime),this._.running=!0)},stop:function(){this._.timeout&&(clearTimeout(this._.timeout),this._.timeout=null,this._.notify(new TimerEvent(TimerEvent.STOP)),this._.running=!1)}}));
_package("com.neuromantic.arete.fx",_class("Easing",{static_linearTween:function(t,b,c,d){return c*t/d+b},static_easeInQuad:function(t,b,c,d){return c*(t/=d)*t+b},static_easeOutQuad:function(t,b,c,d){return-c*(t/=d)*(t-2)+b},static_easeInOutQuad:function(t,b,c,d){return(t/=d/2)<1?c/2*t*t+b:-c/2*(--t*(t-2)-1)+b},static_easeInCubic:function(t,b,c,d){return c*(t/=d)*t*t+b},static_easeOutCubic:function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},static_easeInOutCubic:function(t,b,c,d){return(t/=d/2)<1?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b},static_easeInQuart:function(t,b,c,d){return c*(t/=d)*t*t*t+b},static_easeOutQuart:function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},static_easeInOutQuart:function(t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t+b:-c/2*((t-=2)*t*t*t-2)+b},static_easeInQuint:function(t,b,c,d){return c*(t/=d)*t*t*t*t+b},static_easeOutQuint:function(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},static_easeInOutQuint:function(t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t*t+b:c/2*((t-=2)*t*t*t*t+2)+b},static_easeInSine:function(t,b,c,d){return-c*static_cos(t/d*(Math.PI/2))+c+b},static_easeOutSine:function(t,b,c,d){return c*static_sin(t/d*(Math.PI/2))+b},static_easeInOutSine:function(t,b,c,d){return-c/2*(static_cos(Math.PI*t/d)-1)+b},static_easeInExpo:function(t,b,c,d){return t==0?b:c*Math.pow(2,10*(t/d-1))+b},static_easeOutExpo:function(t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},static_easeInOutExpo:function(t,b,c,d){return t==0?b:t==d?b+c:(t/=d/2)<1?c/2*Math.pow(2,10*(t-1))+b:c/2*(-Math.pow(2,-10*--t)+2)+b},static_easeInCirc:function(t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},static_easeOutCirc:function(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},static_easeInOutCirc:function(t,b,c,d){return(t/=d/2)<1?-c/2*(Math.sqrt(1-t*t)-1)+b:c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},static_easeInElastic:function(t,b,c,d,a,p){if(t==0)return b;if((t/=d)==1)return b+c;p||(p=d*.3);if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p))+b},static_easeOutElastic:function(t,b,c,d,a,p){if(t==0)return b;if((t/=d)==1)return b+c;p||(p=d*.3);if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*2*Math.PI/p)+c+b},static_easeInOutElastic:function(t,b,c,d,a,p){if(t==0)return b;if((t/=d/2)==2)return b+c;p||(p=d*.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return t<1?-0.5*a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p)+b:a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p)*.5+c+b},static_easeInBack:function(t,b,c,d,s){return s==undefined&&(s=1.70158),c*(t/=d)*t*((s+1)*t-s)+b},static_easeOutBack:function(t,b,c,d,s){return s==undefined&&(s=1.70158),c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},static_easeInOutBack:function(t,b,c,d,s){return s==undefined&&(s=1.70158),(t/=d/2)<1?c/2*t*t*(((s*=1.525)+1)*t-s)+b:c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},static_easeInBounce:function(t,b,c,d){return c-Easing.easeOutBounce(d-t,0,c,d)+b},static_easeOutBounce:function(t,b,c,d){return(t/=d)<1/2.75?c*7.5625*t*t+b:t<2/2.75?c*(7.5625*(t-=1.5/2.75)*t+.75)+b:t<2.5/2.75?c*(7.5625*(t-=2.25/2.75)*t+.9375)+b:c*(7.5625*(t-=2.625/2.75)*t+.984375)+b},static_easeInOutBounce:function(t,b,c,d){return t<d/2?Easing.easeInBounce(t*2,0,c,d)*.5+b:Easing.easeOutBounce(t*2-d,0,c,d)*.5+c*.5+b}}));
_package("com.neuromantic.arete.events",_import("com.neuromantic.arete.events.Event"),_class("TweenEvent")._extends("Event",{static_START:"tweenStart",static_STOP:"tweenStop",static_UPDATE:"tweenUpdate",static_UPDATING:"tweenUpdating",static_COMPLETE:"tweenComplete"}));
_package("com.neuromantic.arete.fx",_import("com.neuromantic.arete.fx.Timer"),_import("com.neuromantic.arete.fx.Easing"),_import("com.neuromantic.arete.events.TweenEvent"),_class("Tween")._extends("Timer",{static_SPECIAL_PROPERTIES:["delay","onStart","onUpdate","onComplete","onStop","scope"],static_frameRate:100,private_toProperties:null,private_tweenDuration:0,private_startTime:0,private_context:null,private_easing:null,static_to:function(target,duration,properties){return new Tween(target,duration,properties)},static_delayedCall:function(delay,toCall){return new Tween("delayedCall",0,{delay:delay,onComplete:toCall})},static_delta:function(target,duration,properties){var deltaProperties={};for(var propertyName in properties)Tween.SPECIAL_PROPERTIES.indexOf(propertyName)<0?deltaProperties[propertyName]=Number(target._get(propertyName)+properties[propertyName]):deltaProperties[propertyName]=properties[propertyName];return new Tween(target,duration,deltaProperties)},static_from:function(target,duration,properties){var originalProperties={};for(var propertyName in properties)originalProperties[propertyName]=target._get(propertyName),Tween.SPECIAL_PROPERTIES.indexOf(propertyName)<0?target._set(propertyName,properties[propertyName]):originalProperties[propertyName]=properties[propertyName];return new Tween(target,duration,originalProperties)},Tween:function(target,duration,properties){this._super(1e3/Tween.frameRate),this.on(TimerEvent.TICK,this._.updateTween),this._.target=target,this._.tweenDuration=duration,this._.toProperties=properties,this._.easing=properties.easing||Easing.easeInOutQuad,this._.fromProperties={},properties.onComplete&&this.on(TweenEvent.COMPLETE,properties.onComplete),properties.onStart&&this.on(TweenEvent.START,properties.onStart),properties.onUpdate&&this.on(TweenEvent.UPDATE,properties.onUpdate),properties.delay?(this._.delayTimer=new Timer(properties.delay*1e3,1),this._.delayTimer.on(TimerEvent.COMPLETE,this.startTween),this._.delayTimer.start(),delete properties.delay):this.startTween()},private_currentTime:function(){return Date.now()*.001},private_elapsedTime:function(){return this._.currentTime()-this._.startTime},kill:function(finish){this._.delayTimer&&(this._.delayTimer.stop(),this._.delayTimer=null),this.stopTween(finish)},private_delayTimer:null,startTween:function(){this._.notify(new TweenEvent(TweenEvent.START)),this._.startTime=this._.currentTime();for(var propertyName in this._.toProperties)Tween.SPECIAL_PROPERTIES.indexOf(propertyName)<0&&(this._.fromProperties[propertyName]=this._.target._get(propertyName));this.tweenDuration===0&&this._.updateTween(),this.start()},private_updateTween:function(){this._.notify(new TweenEvent(TweenEvent.UPDATING));var previousValues={};for(var propertyName in this._.toProperties)if(Tween.SPECIAL_PROPERTIES.indexOf(propertyName)<0){var newValue=this._.easing(this._.elapsedTime(),this._.fromProperties[propertyName],this._.toProperties[propertyName]-this._.fromProperties[propertyName],this._.tweenDuration);previousValues[propertyName]=this._.target._get(propertyName),this._.target._set(propertyName,newValue)}this._.notify(new TweenEvent(TweenEvent.UPDATE,previousValues));if(this._.elapsedTime()>=this._.tweenDuration)return this.stopTween(!0)},stopTween:function(finish){if(finish)for(var propertyName in this._.toProperties)Tween.SPECIAL_PROPERTIES.indexOf(propertyName)<0&&this._.target._set(propertyName,this._.toProperties[propertyName]);this._.notify(new TweenEvent(TweenEvent.COMPLETE)),this.stop()}}));
_package("com.neuromantic.arete.data",_class("Dictionary",{_:function(key,value){if(value===undefined)return this._values[this._values.indexOf(key)];var index=this._keys.indexOf(key);index<0&&(index=this._.keys.length,this._keys[index]=key),value===null?(this._keys.splice(index,1),this._values.splice(index,1)):this._values[index]=value},_keys:[],_values:[],Dictionary:function(){},toString:function(){return"Dictionary with "+this._.keys.length+" keys and "+this._values.length+" values."}}));
_package("com.grabnetworks.vidify",_import("com.grabnetworks.player.Player"),_import("com.grabnetworks.vidify.Badger"),_import("com.grabnetworks.ui.CloseButton"),_import("com.grabnetworks.loading.ContentLoader"),_import("com.grabnetworks.loading.CatalogLoader"),_import("com.grabnetworks.tracking.Ping"),_import("com.grabnetworks.tracking.PlaybackPinger"),_import("com.neuromantic.arete.dom.Window"),_import("com.neuromantic.arete.dom.Document"),_import("com.neuromantic.arete.dom.elements.media.Img"),_import("com.neuromantic.arete.fx.Tween"),_import("com.neuromantic.arete.events.MouseEvent"),_import("com.neuromantic.arete.events.LoadingEvent"),_import("com.neuromantic.arete.data.Dictionary"),_class("Vidify",{private_badger:null,private_badgeImg:null,private_badgerClicked:!1,private_target:null,private_closeButton:null,private_container:null,private_player:null,private_playerSettings:{},private_options:null,private_guid:null,private_ready:!1,private_onOptionsLoaded:function(event){var whitelisted,options=event.data,productOptions=options.grabnetworks.vidify||options.grabnetworks.product;_trace("Received Options",productOptions);if(productOptions){this._.badgeImg.tag(productOptions.badge),this._.target=productOptions.target||this._.target;var pages=productOptions.pages,url=location.href;if(pages){whitelisted=pages[0]=="*";for(var i=0;i<pages.length;i++)whitelisted=whitelisted||url.indexOf(pages[i])>-1}if(whitelisted){new Ping({p:"vf",e:"load",i:this._.playerSettings.id,u:encodeURIComponent(url)}),_trace("Page found in whitelist");var loader,content=options.grabnetworks.content;switch(content){case"MATCH":_trace("Retreiving matching video..."),loader=new CatalogLoader("test"),loader.on(LoadingEvent.COMPLETE,this._.onCatalogLoaded),loader.loadMatch();break;case"RELATED":_trace("Retreiving related video..."),loader=new CatalogLoader,loader.on(LoadingEvent.COMPLETE,this._.onCatalogLoaded),loader.loadRelated();break;default:_trace("Using embedded video."),this._.guid=content,this._.badge()}}}else _trace("Options do not contain vidify config.");this._.options=event.data},private_onWindowLoad:function(){_trace("Window ready..."),this._.ready=!0,this._.badge()},private_onCatalogLoaded:function(event){_trace("Received search results."),event.data.response.results.length>0?(_trace("Found content candidates."),event.data.trigger||_trace("Ignoring trigger recommendation."),this._.guid=event.data.response.results[0].video.guid,this._.badge()):_trace("No candidates.")},private_onBadgerClicked:function(event){new Ping({p:"vf",e:"action",i:this._.playerSettings.id,t:"click_badge"}),this._.playVideo()},private_onBadgeImgOver:function(event){this._.container.style({backgroundColor:"rgba(0,0,0,0.5)"})},private_onBadgeImgOut:function(event){this._.container.style({backgroundColor:"transparent"})},private_onCloseButtonClicked:function(event){new Ping({p:"vf",e:"action",i:this._.playerSettings.id,t:"click_close"}),this._.player.hide(),this._.badger.visible(!0),this._.closeButton.visible(!1)},private_onPlayerVideoEnded:function(event){this._.player.hide(),this._.badger.visible(!0),this._.closeButton.visible(!1)},private_badge:function(){if(this._.guid&&this._.ready){_trace("Badging your page...");var root=Document.element();this._.target&&(root=root.first(this._.target));var TARGET_RATIO=1.77777778,target,best=0,area,img,images,ratio,match;images=root.find(Img);for(var i=0;i<images.length;i++)img=images[i],area=img.width()*img.height(),ratio=img.width()/img.height(),proximity=1-Math.abs(TARGET_RATIO-ratio),match=area*proximity,match>best&&(target=img,best=match);if(target){_trace("Badging image with src =",target.tag().src,"..."),this._.badger=new Badger(target,this._.badgeImg),this._.badger.on(MouseEvent.CLICK,this._.onBadgerClicked),this._.badgeImg.on(MouseEvent.OVER,this._.onBadgeImgOver),this._.badgeImg.on(MouseEvent.OUT,this._.onBadgeImgOut),this._.playerSettings.width=target.width(),this._.playerSettings.height=target.height(),this._.playerSettings.content=this._guid;var element=this._.badger,parent;while(element&&element.tag().parentNode!==document)parent=element.parent(),parent&&parent.tag().href&&(_debug("clearing surrounding hyperlink with href =",parent.tag().href,"."),parent.parent().replace(element,parent)),element=parent;this._.container=new Div({style:{position:"absolute",top:0,left:0,zIndex:10001}}),this._.container.width(target.width()),this._.container.height(target.height()),this._.badger.append(this._.container),new Ping({p:"vf",e:"render",i:this._.playerSettings.id})}}},private_playVideo:function(){_trace("Playing video."),this._.playerSettings.content=this._.guid,this._.playerSettings.parent=this._.container.tag(),this._.player||(this._.player=new Player(this._.playerSettings),this._.closeButton=new CloseButton,this._.closeButton.style({position:"absolute",top:"-10px",right:"-10px",zIndex:10005}),this._.closeButton.on(MouseEvent.CLICK,this._.onCloseButtonClicked),this._.badger.append(this._.closeButton),this._.player.on(PlayerEvent.VIDEO_ENDED,this._.onPlayerVideoEnded),new PlaybackPinger(this._.player,"vf")),this._.badger.visible(!1),this._.closeButton.visible(!0),this._.closeButton.alpha(0),Tween.to(this._.closeButton,.5,{alpha:1}),this._.player.show()},Vidify:function(settings){settings.id=settings.id||1720202,this._.playerSettings=settings,new Ping({p:"vf",e:"init",i:this._.playerSettings.id}),this._.badgeImg=new Img({src:"http://static.grab-media.com/images/badges/playS.png",style:{bottom:"0px",right:"0px"}}),settings.badge&&this._.badgeImg.tag({src:decodeURIComponent(settings.badge)}),Window.onLoad(this._.onWindowLoad);var loader=new ContentLoader;loader.on(LoadingEvent.LOADED,this._.onOptionsLoaded),loader.loadOptions(settings.id)}}));
var scripts = document.getElementsByTagName( "script" );
var script = scripts[ scripts.length - 1 ];
var query = script.src.split("?")[1];
if( query.length > 0 ){
	var settings = {};
	var list = query.split( "&");
	for (var i = 0; i < list.length; i++ ){
		var pair = list[i].split("=");
		settings[pair[0]] = pair[1];
	};
	new com.grabnetworks.vidify.Vidify( settings );
}
})();