{"ts":1358709969394,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*!\n *\n * DisplayObject.js\n * com.fasejs.display.DisplayObject\n *\n * https://github.com/neuromantic/CodeJS/\n *\n * Copyright 2011, Neuromantic Industries & For Sure, Rad!\n * Licensed under the MIT license.\n *\n */\n _package( 'com.fasejs.display',\n \n \t_import( 'com.fasejs.events.EventDispatcher' ),\n \t_import( 'com.fasejs.events.MouseEvent' ),\n \t_import( 'com.fasejs.display.Stage' ),\n \t\n\t_class( 'DisplayObject' )._extends( 'EventDispatcher', {\n\t\t\n\t\tstatic_count : 0,\n\t\t// private_mouseEnabled : true,\n\t\t// get_mouseEnabled : function () {\n\t\t\t// return this._.mouseEnabled;\n\t\t//},\n\t\t//set_mouseEnabled : function( value ) {\n\t\t\t// this._.mouseEnabled = value;\n\t\t// },\n\t\tDisplayObject : function( hostElement ) {\n\t\t\tthis._super();\n\t\t\thostElement = hostElement || document.createElement( 'div' );\n\t\t\tthis.element( hostElement );\n\t\t},\n\t\tprivate_element : null,\n\t\tget_element : function () {\n\t\t\treturn this._.element;\n\t\t},\n\t\tset_element : function ( value ) {\n\t\t\tthis._.element = value;\n\t\t\tthis._.element.className = this._className;\n\t\t\tif( this._.element.id ){\n\t\t\t\tthis.name( this._.element.id )\n\t\t\t}else if( this._.name ) {\n\t\t\t\tthis._.element.id = this._.name;\n\t\t\t};\n\t\t\tvar _this = this;\n\t\t\tthis._.element.onmouseover = function( e ) {\n\t\t\t\t _this._.dispatchMouseEvent( new MouseEvent( MouseEvent.OVER, MouseEvent.mouseX( e ), MouseEvent.mouseY( e ) ) ); \n\t\t\t};\n\t\t\tthis._.element.onmouseout = function( e ) {\n\t\t\t\t _this._.dispatchMouseEvent( new MouseEvent( MouseEvent.OUT, MouseEvent.mouseX( e ), MouseEvent.mouseY( e ) ) ); \n\t\t\t};\n\t\t\tthis._.element.onmousedown = function ( e ) {\n\t\t\t\t _this._.dispatchMouseEvent( new MouseEvent( MouseEvent.DOWN, MouseEvent.mouseX( e ), MouseEvent.mouseY( e ) ) ); \n\t\t\t};\n\t\t\tthis._.element.onmouseup = function ( e ) {\n\t\t\t\t_this._.dispatchMouseEvent( new MouseEvent( MouseEvent.UP, MouseEvent.mouseX( e ), MouseEvent.mouseY( e ) ) ); \n\t\t\t};\n\t\t\tthis._.element.onclick = function ( e ) {\n\t\t\t\t_this._.dispatchMouseEvent( new MouseEvent( MouseEvent.CLICK, MouseEvent.mouseX( e ), MouseEvent.mouseY( e ) ) ); \n\t\t\t};\n\t\t\tthis._.element.onkeydown = function ( e ) { \n\t\t\t\t_this._dispatchEvent( new KeyboardEvent( KeyboardEvent.DOWN ) ); \n\t\t\t};\n\t\t\tthis._.element.onkeyup = function ( e ) { \n\t\t\t\t_this._dispatchEvent( new KeyboardEvent( KeyboardEvent.UP ) ); \n\t\t\t};\n\t\t\tthis._.element.onkeypress = function ( e ) { \n\t\t\t\t_this._dispatchEvent( new KeyboardEvent( KeyboardEvent.PRESS ) ); \n\t\t\t};\n\t\t\tthis._.element.onfocus = function ( e ) { \n\t\t\t\t_this._dispatchEvent( new FocusEvent( FocusEvent.IN ), _this );\n\t\t\t};\n\t\t\tthis._.element.onblur = function () {\n\t\t\t\t_this._dispatchEvent( new FocusEvent( FocusEvent.OUT ), _this );\n\t\t\t};\n\t\t\tthis._.element.onchange = function () {\n\t\t\t\t_this._dispatchEvent( new Event( Event.CHANGE ), _this );\n\t\t\t};\n\t\t\t\n\t\t\tthis.visible( this._.element.style.display != 'none' );\n\t\t\tthis._.element.style.position = 'absolute';\n\t\t\tthis._.element.style.whiteSpace = 'nowrap';\n\t\t\tthis._.element.style.minWidth = 0;\n\t\t\tthis._.element.style.minHeight = 0;\n\t\t\t\n\t\t},\n\t\tprivate_dispatchMouseEvent : function( event ) {\n\t\t\tif( this._.mouseEnabled ) {\n\t\t\t\tevent.target = this;\n\t\t\t\tthis._dispatchEvent( event );\n\t\t\t};\n\t\t},\n\t\tprivate_mouseX : 0,\n\t\tget_mouseX : function () {\n\t\t\treturn this._.mouseX;\n\t\t},\n\t\tset_mouseX : function( value ) {\n\t\t\tthis._.mouseX = value - this._.x;\n\t\t\tfor( var child in this.children ) {\n\t\t\t\tchild.mouseX( this.mouseX() );\n\t\t\t};\n\t\t},\n\t\tprivate_mouseY : 0,\n\t\tget_mouseY : function () {\n\t\t\treturn this._.mouseY\n\t\t},\n\t\tset_mouseY : function( value ) {\n\t\t\tthis._.mouseY = value - this._.y;\n\t\t\tfor( var child in this.children ) {\n\t\t\t\tchild.mouseY( this.mouseY() );\n\t\t\t};\n\t\t},\n\t\tset_name : function( value ) {\n\t\t\tthis._.name = value;\n\t\t\tif( this._.element ) {\n\t\t\t\tthis._.element.id = this._.name;\n\t\t\t};\n\t\t},\n\t\tget_name : function () {\n\t\t\t\treturn this._.name;\n\t\t},\n\t\tprivate_stage : null,\n\t\tget_stage : function( value ) {\n\t\t\treturn this._.stage;\n\t\t},\n\t\tset_stage : function( value ) {\n\t\t\tthis._.stage = value;\n\t\t\tfor ( index in this._.children ) {\n\t\t\t\tif( this._.children[ index ] ) {\n\t\t\t\t\tthis._.children[ index ].stage( this._.stage );\n\t\t\t\t};\n\t\t\t};\n\t\t},\n\t\tget_parent : function () {\n\t\t\treturn this._.parent;\n\t\t},\n\t\tset_parent : function( value ) {\n\t\t\tthis._.parent =  value;\n\t\t\tthis.stage( this._.parent ? this._.parent.stage() : null );\n\t\t},\n\t\tprivate_children : [],\n\t\tcontains : function( potentialChild ) {\n\t\t\tif ( this._.children.indexOf( potentialChild ) > - 1 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tfor( var index in this._.children ) {\n\t\t\t\tvar child = this._.children[ index ];\n\t\t\t\tif ( child.contains( potentialChild ) ){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\taddChild : function( child ) {\n// _debug( this, 'addChild', child, child._.element, child.element(), child.element );\n\t\t\tif( child !== this ){\n\t\t\t\tif( child instanceof DisplayObject ) {\n\t\t\t\t\tif ( child.parent() != null ) {\n\t\t\t\t\t\tchild.parent().removeChild( child );\n\t\t\t\t\t};\n\t\t\t\t\tthis._.element.appendChild( child.element() );\n\t\t\t\t\tchild.element().style.zIndex =  this._.children.length;\n\t\t\t\t\tchild.parent( this );\n\t\t\t\t\tthis._.children.push( child );\n\t\t\t\t}else{\n\t\t\t\t\t_trace( child , 'is not a' , DisplayObject );\n\t\t\t\t};\n\t\t\t\tthis._.measure( true );\n\t\t\t} else {\n\t\t\t\tthrow new Error('You cannot addChild something to itself.')\n\t\t\t};\n\t\t},\n\t\tprivate_measure : function ( shrunk ) {\n// _debug( this, '_measure', shrunk );\n\t\t\tif( shrunk ) {\n\t\t\t\tthis._.element.style.width = '0px'\n\t\t\t\tthis._.element.style.height = '0px'\n\t\t\t}\n\t\t\tfor ( var index in this._.children ){\n\t\t\t\tvar child = this._.children[ index ];\n\t\t\t\tthis._.element.style.width = Math.max( this.width(), child.x() + child.width() ) + 'px';\n\t\t\t\tthis._.element.style.height = Math.max( this.height(), child.y() + child.height() ) + 'px';\n\t\t\t}\n\t\t},\n\t\tremoveChild : function( child ) {\n\t\t\tthis._.element.removeChild( child.element() );\n\t\t\tthis._.children.splice( this._.children.indexOf( child ), 1 );\n\t\t\tchild.parent( null );\n\t\t\tthis._.measure();\n\t\t},\n\t\tprivate_x : 0,\n\t\tget_x : function( value ) {\n\t\t\treturn this._.x;\n\t\t},\n\t\tset_x : function( value ) {\n\t\t\tthis._.x = value;\n\t\t\tif( this._.parent ) {\n\t\t\t\tvar inheritedX = ( this._.parent ? this._.parent.y() : 0 );\n\t\t\t\tvar x = value + inheritedX;\n\t\t\t\tthis._.element.style.left = this._.x + 'px';\n\t\t\t\tfor ( index in this._.children ) {\n\t\t\t\t\tvar child = this._.children[ index ];\n\t\t\t\t\tchild.x( child._.x );\n\t\t\t\t};\n\t\t\t\tthis._.parent._.measure( true );\n\t\t\t};\n\t\t},\n\t\tprivate_y : 0,\n\t\tget_y : function () {\n\t\t\t\treturn this._.y;\n\t\t},\n\t\tset_y : function( value ) {\n\t\t\tthis._.y = value;\n\t\t\tif( this._.parent ) {\n\t\t\t\tvar inheritedY = ( this._.parent ? this._.parent.y() : 0 );\n\t\t\t\tvar y = value + inheritedY;\n\t\t\t\tthis._.element.style.top = this._.y + 'px';\n\t\t\t\tfor ( index in this._.children ) {\n\t\t\t\t\tvar child = this._.children[ index ];\n\t\t\t\t\tchild.y( child._.y );\n\t\t\t\t};\n\t\t\t\tthis._.parent._.measure( true );\n\t\t\t};\n\t\t},\n\t\tprivate_rotation : 0,\n\t\tget_rotation : function () {\n\t\t\t\treturn this._.rotation;\n\t\t},\n\t\tset_rotation : function ( value ) {\n\t\t\tthis._.element.style.transform = this._.element.style.MozTransform = this._.element.style.OTransform =  this._.element.style.WebkitTransform = 'rotate('+value+'deg)';\n\t\t\tthis._.rotation = value;\n//\t\t\tfunction degreesToRadians(num) {\n//\t\t\t\treturn (num) * Math.PI / 180;\n//\t\t\t}\n//\t\t\tfunction createIEMatrixString(M) {\n//\t\t\t\treturn 'M11=' + M.e(1, 1) + ', M12=' + M.e(1,2) + ', M21=' + M.e(2,1) + ', M22=' + M.e(2,2);\n//\t\t\t}\n//\t\t\tfunction rotateElement(e, deg) {\n//\t\t\t\tdeg_str = deg + \"\";\n//\t\t\t\trotate_transform = \"rotate(\" + deg + \"deg)\";\n//\t\t\t\tmatrix_str = createIEMatrixString(Matrix.Rotation(degreesToRadians(deg)));\n//\t\t\t\tfilter_str = \"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', \" + matrix_str + \")\";\n//\t\t\t\n//\t\t\t\te.style[\"rotation\"] = deg_str + \"deg\"; // CSS3\n//\t\t\t\te.style.MozTransform = rotate_transform; // Moz\n//\t\t\t\te.style.OTransform = rotate_transform; // Opera\n//\t\t\t\te.style.WebkitTransform = rotate_transform; // Webkit/Safari/Chrome\n//\t\t\t\te.style.filter = filter_str; // IE 6/7\n//\t\t\t\te.style.MsFilter = filter_str; // IE 8\n//\t\t\t\te.style[\"zoom\"] = \"1\"; // ??? Probably IEs\n//\t\t\t}\n\t\t\t\n\t\t},\n\t\tget_height : function( ) {\n\t\t\treturn Number( this._.element.offsetHeight );\n\t\t},\n\t\tset_height : function( value ) {\n\t\t\tthis._.element.style.height = value +'px';\n\t\t\tthis._.parent ? this._.parent._.measure() : 0;\n\t\t},\n\t\tget_width : function () {\n\t\t\t\treturn Number( this._.element.offsetWidth );\n\t\t},\n\t\tset_width : function( value ) {\n\t\t\tthis._.element.style.width = value + 'px';\n\t\t\tthis._.parent ? this._.parent._.measure() : 0;\n\t\t},\n\t\tprivate_alpha : 1,\n\t\tget_alpha : function () {\n\t\t\t\treturn this._.alpha;\n\t\t},\n\t\tset_alpha : function ( value ) {\n\t\t\tthis._.element.style.opacity = value;\n\t   \t\t// this._.element.style.filter = 'alpha(opacity=' + value * 100 + ')';\n\t   \t\tthis._.alpha = value;\n\t\t},\n\t\tprivate_visible : null,\n\t\tget_visible : function () {\n\t\t\t\tif(this._.visible === null){\n\t\t\t\t\tthis._.visible = this._.element.style.display != 'none';\n\t\t\t\t};\n\t\t\t\treturn this._.visible;\n\t\t},\n\t\tset_visible : function ( value ) {\n\t\t\tthis._.visible = value;\n\t\t\tthis._.element.style.display = this._.visible ? 'block' : 'none';\n\t\t\tfor( index in this._.children ) {\n\t\t\t\tthis._.children[ index ].visible( this._.visible );\n\t\t\t};\n\t\t\t\n\t\t},\n\t\tget_autoAlpha : function () {\n\t\t\t\treturn this._.alpha;\n\t\t},\n\t\tset_autoAlpha : function (value) {\n\t\t\tthis.alpha( value );\n\t\t\tthis.visible( this._.alpha > 0 );\n\t\t},\n\t\ttoString : function () {\n\t\t\treturn ( this._.name ) || this._super().toString();\n\t\t}\n\t})\n);"]],"start1":0,"start2":0,"length1":0,"length2":9479}]],"length":9479}
{"contributors":[],"silentsave":false,"ts":1359353446356,"patch":[[{"diffs":[[0,"t( event );\n\t\t\t}"],[-1,";"],[0,"\n\t\t},\n\t\tprivate_"]],"start1":3130,"start2":3130,"length1":33,"length2":32},{"diffs":[[0,");\n\t\t\t\t}"],[-1,";"],[0,"\n\t\t\t}"],[-1,";"],[0,"\n\t\t},\n\t\t"]],"start1":4085,"start2":4085,"length1":23,"length2":21}]],"length":9476,"saved":false}
{"ts":1359353457778,"patch":[[{"diffs":[[0,"unction () {\n\t\t\t"],[-1,"\t"],[0,"return this._.ro"]],"start1":6875,"start2":6875,"length1":33,"length2":32}]],"length":9475,"saved":false}
