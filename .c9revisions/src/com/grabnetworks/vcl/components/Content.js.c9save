{"ts":1364953124536,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*!\n *\n * Content.js\n * com.grabnetworks.vcl.components.Content\n *\n */\n_package( 'com.grabnetworks.vcl.components',\n\n     _import( 'com.neuromantic.arete.component.Component' ),\n     _import( 'com.neuromantic.arete.net.JSONP' ),\n \t\n\t_class( 'Content' )._extends( 'Component', {\n        private_guid : null,\n        private_loader : null,\n        private_server: 'http://content.grabnetworks.com/',\n\t\tprivate_load : function ( contentID ) {\n            var type;\n\t\t\tvar guid;\n\t\t\tswitch ( contentID.length ) {\n\t\t\t\tcase 40:\n\t\t\t\t\tguid = contentID;\n\t\t\t\t\ttype = 'v';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 41:\n\t\t\t\t\tguid = contentID.substr( 1 );\n\t\t\t\t\ttype = contentID.substr( 0, 1 );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Invalid GUID length' );\n\t\t\t}\n            var fromPage = escape(global.location.href.toString());\n            this._.loader = new JSONP( 'jsonp' );\n            this._.loader.on( LoadingEvent.LOADED, this._.onLoaded );\n            this._.loader.load(  this._.server + '/' +  type + '/' + guid + '?from=' + fromPage );\n            this._.guid = guid;\n\t\t},\n        private_onLoaded : function ( event ){\n                this.emit(event.data);\n        },\n\t\tconfig: function( config ) {\n\t\t\tif( config.content ) {\n\t\t\t\tthis._.load( config.content );\n\t\t\t}\n\t\t},\n\t\tprocess : function ( message ) {\n\t\t\tif( message.content && !this._.guid){\n\t\t\t\tthis._.load( message.content);\n\t\t\t}\n\t\t\tthis._super().process( message );\n\t\t}\n\t} )\n);"]],"start1":0,"start2":0,"length1":0,"length2":1423}]],"length":1423}
