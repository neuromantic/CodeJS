{"ts":1358746486902,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*!\n *\n * Timer.js\n * com.fasejs.util.Timer\n *\n * https://github.com/neuromantic/CodeJS/\n *\n * Copyright 2011, Neuromantic Industries & For Sure, Rad!\n * Licensed under the MIT license.\n *\n */\n_package( 'com.fasejs.util',\n\n\t_import( 'com.fasejs.events.EventDispatcher' ),\n\t_import( 'com.fasejs.events.TimerEvent' ),\n\t\n\t_class('Timer')._extends('EventDispatcher', {\n\t\tprivate_tickTime : 0,\n\t\tprivate_remaining : 0,\n\t\tprivate_repeat : 0,\n\t\tprivate_timeout : null,\n\t\tprivate_running : false,\n\t\tTimer : function( tickTime, repeat ) {\n//_debug( this, 'Timer' );\n\t\t\tthis._super();\n\t\t\tthis._.tickTime = tickTime;\n\t\t\tthis._.repeat = repeat || -1;\n\t\t\tthis._.remaining = repeat;\n\t\t\t//_trace( 'new Timer', tickTime, repeat );\n\t\t},\n\t\ttick : function () {\n\t\t\t//_trace( 'ticking', this._.timeout);\n\t\t\tif( this._.remaining > 0 || this._.repeat === -1 ) {\n\t\t\t\tthis._dispatchEvent( new TimerEvent( TimerEvent.TIMER, this ) );\n\t\t\t\t//_trace( 'advance');\n\t\t\t\tthis.advance();\n\t\t\t}else{\n\t\t\t\tthis._dispatchEvent( new TimerEvent( TimerEvent.COMPLETE, this ) );\n\t\t\t\t//_trace( 'stop' );\n\t\t\t\tthis.stop();\n\t\t\t};\n\t\t\tthis._.remaining--;\n\t\t},\n\t\tadvance : function () {\n\t\t\t//_trace( 'advancing' );\n\t\t\tif( this._.running ){\n\t\t\t\tthis.stop();\n\t\t\t\tthis.start();\n\t\t\t}\n\t\t},\n\t\treset : function () {\n\t\t\t//_trace( 'resetting' );\n\t\t\tthis._dispatchEvent( new TimerEvent( TimerEvent.RESET, this ) );\n\t\t\tthis._.remaining = this._.repeat;\n\t\t\tthis.advance();\n\t\t},\n\t\tstart : function () {\n\t\t\t//_trace( 'starting, my timeout is', this._.timeout );\n\t\t\tif (! this._.timeout ) {\n\t\t\t\tvar _this = this;\n\t\t\t\tthis._dispatchEvent( new TimerEvent( TimerEvent.START, this ) );\n\t\t\t\tthis._.timeout = window.setTimeout( function(){ _this.tick() }, this._.tickTime );\n\t\t\t\t//_trace( 'created timeout', this._.timeout );\n\t\t\t\tthis._.running = true;\n\t\t\t};\n\t\t},\n\t\tstop : function () {\n\t\t\t//_trace( 'stopping' );\n\t\t\tif ( this._.timeout ){\n\t\t\t\twindow.clearTimeout( this._.timeout );\n\t\t\t\tthis._.timeout = null;\n\t\t\t\tthis._dispatchEvent( new TimerEvent( TimerEvent.STOP, this ) );\n\t\t\t\tthis._.running = false;\n\t\t\t};\n\t\t}//,\n\t})\n);\n\t"]],"start1":0,"start2":0,"length1":0,"length2":2057}]],"length":2057}
{"contributors":[],"silentsave":false,"ts":1358831601138,"patch":[[{"diffs":[[0,"\n * com."],[-1,"fasejs.util"],[1,"neuromantic.arete.fx"],[0,".Timer\n "]],"start1":18,"start2":18,"length1":27,"length2":36},{"diffs":[[0,"com."],[-1,"fasejs.util',\n\n\t_import( 'com.fasejs.events.EventDispatch"],[1,"neuromantic.arete.fx',\n\n    _import( 'com.neuromantic.arete.events.Notifi"],[0,"er' "]],"start1":213,"start2":213,"length1":65,"length2":81},{"diffs":[[0,"com."],[-1,"fasejs"],[1,"neuromantic.arete"],[0,".eve"]],"start1":308,"start2":308,"length1":14,"length2":25},{"diffs":[[0,"ds('"],[-1,"EventDispatch"],[1,"Notifi"],[0,"er',"]],"start1":377,"start2":377,"length1":21,"length2":14},{"diffs":[[0,";\n\t\t"],[-1,"\t//_trace( 'new Timer', tickTime, repeat );\n\t\t},\n\t\ttick : function () {\n\t\t\t//_trace( 'ticking', this._.timeout);"],[1,"},\n\t\tprivate_tick : function () {"],[0,"\n\t\t\t"]],"start1":696,"start2":696,"length1":120,"length2":41},{"diffs":[[0,"{\n\t\t\t\tthis._"],[-1,"dispatchEvent"],[1,".notify"],[0,"( new TimerE"]],"start1":788,"start2":788,"length1":37,"length2":31},{"diffs":[[0,"IMER"],[-1,", this"],[0," ) );\n"],[-1,"\t\t\t\t//_trace( 'advance');\n"],[0,"\t\t\t\t"]],"start1":837,"start2":837,"length1":46,"length2":14},{"diffs":[[0,"R ) );\n\t\t\t\tthis."],[1,"_."],[0,"advance();\n\t\t\t}e"]],"start1":840,"start2":840,"length1":32,"length2":34},{"diffs":[[0,"{\n\t\t\t\tthis._"],[-1,"dispatchEvent"],[1,".notify"],[0,"( new TimerE"]],"start1":877,"start2":877,"length1":37,"length2":31},{"diffs":[[0,"LETE"],[-1,", this"],[0," ) );\n"],[-1,"\t\t\t\t//_trace( 'stop' );\n"],[0,"\t\t\t\t"]],"start1":929,"start2":929,"length1":44,"length2":14},{"diffs":[[0,"\n\t\t},\n\t\t"],[1,"private_"],[0,"advance "]],"start1":984,"start2":984,"length1":16,"length2":24},{"diffs":[[0,") {\n"],[-1,"\t\t\t//_trace( 'advancing' );\n"],[0,"\t\t\ti"]],"start1":1020,"start2":1020,"length1":36,"length2":8},{"diffs":[[0,"\n\t\t\t"],[-1,"//_trace( 'resetting' );\n\t\t\tthis._dispatchEvent"],[1,"this._.notify"],[0,"( ne"]],"start1":1117,"start2":1117,"length1":55,"length2":21},{"diffs":[[0,"nt.RESET"],[-1,", this"],[0," ) );\n\t\t"]],"start1":1160,"start2":1160,"length1":22,"length2":16},{"diffs":[[0,"\t\t\tthis."],[-1,""],[0,""],[1,"_."],[0,"advance("]],"start1":1211,"start2":1211,"length1":16,"length2":18},{"diffs":[[0,"\n\t\t\t"],[-1,"//_trace( 'starting, my timeout is', this._.timeout );\n\t\t\tif (! this._.timeout ) {\n\t\t\t\tvar _this = this;\n\t\t\t\tthis._dispatchEvent"],[1,"if (! this._.timeout ) {\n\t\t\t\tthis._.notify"],[0,"( ne"]],"start1":1260,"start2":1260,"length1":136,"length2":50},{"diffs":[[0,"nt.START"],[-1,", this"],[0," ) );\n\t\t"]],"start1":1332,"start2":1332,"length1":22,"length2":16},{"diffs":[[0,"meout = "],[-1,"window."],[0,"setTimeo"]],"start1":1359,"start2":1359,"length1":23,"length2":16},{"diffs":[[0,"ut( "],[-1,"function(){ _"],[0,"this."],[1,"_."],[0,"tick"],[-1,"() }"],[1," "],[0,", th"]],"start1":1375,"start2":1375,"length1":34,"length2":20},{"diffs":[[0," );\n"],[-1,"\t\t\t\t//_trace( 'created timeout', this._.timeout );\n"],[0,"\t\t\t\t"]],"start1":1408,"start2":1408,"length1":59,"length2":8},{"diffs":[[0,") {\n"],[-1,"\t\t\t//_trace( 'stopping' );\n"],[0,"\t\t\ti"]],"start1":1469,"start2":1469,"length1":35,"length2":8},{"diffs":[[0,"\t\t\t\t"],[-1,"window."],[0,"clea"]],"start1":1499,"start2":1499,"length1":15,"length2":8},{"diffs":[[0,"is._"],[-1,"dispatchEvent"],[1,".notify"],[0,"( ne"]],"start1":1568,"start2":1568,"length1":21,"length2":15},{"diffs":[[0,"ent.STOP"],[-1,", this"],[0," ) );\n\t\t"]],"start1":1604,"start2":1604,"length1":22,"length2":16}]],"length":1667,"saved":false}
